"use strict";function autocompleteInaturalist(e,s){const i="inaturalist";let a=[];console.log(e),valid(e.total_results>0)&&$.each(e.results,function(r,u){const o=valid(u.matched_term)?u.matched_term:"";o&&s.push(o)})}function processResultsInaturalist(e,s,i){const a="inaturalist";return new Promise((r,u)=>{if(console.log(e),!valid(e.results))r([[],[]]);else if(e.results.length===0)r([[],[]]);else if(Math.max(Math.ceil(e.results.total_results/(datasources[a].pagesize*(explore.page-1))),1)===1)r([[],[]]);else{datasources[a].total=e.total_results;let o={source:{data:{batchcomplete:"",continue:{continue:"-||",sroffset:datasources[a].pagesize,source:a},query:{search:[],searchinfo:{totalhits:datasources[a].total}}}}};$.each(e.results,function(k,t){let c="";const w=t.id,v=explore.language,x=removebracesTitle(getSearchTerm()),q="";let m="",f="",n=valid(t.name)?t.name:"---",I=valid(t.rank)?t.rank:"",l="",y=[],z=[],_="",h="",g="";getQidFromTitle(n,explore.language).then(p=>c=p,console.log(`Wikidata QID for "${n}" in ${v}: ${c}`)).catch(p=>console.error("Error no Qid:",n,p.message)),valid(t.default_photo)&&(valid(t.default_photo)&&(h=t.default_photo.medium_url),valid(t.default_photo.attribution)&&(g=t.default_photo.attribution)),valid(t.id)&&(m=`/app/wikipedia/?t=${encodeURIComponent(n)}&l=${explore.language}`,f="https://www.inaturalist.org/observations?place_id=any&subview=map&taxon_id="+t.id),valid(f)&&(l=l+`<div><a target="_blank" title="iNaturalist page" aria-label="iNaturalist page" href="${f}"><i class="fa-solid fa-arrow-up-right-from-square"></i> iNaturalist observations</a></div>`),valid(t.rank)&&(l+=`<br/><div><i>${capitalizeFirstLetter(t.rank)}</i></div>`),valid(t.preferred_common_name)&&(l+=`<br/><div>${t.preferred_common_name}</div>`),valid(g)&&(l+=`<br/><div>${g}</div>`);let d={source:a,title:n,description:l,qid:c,gid:valid(t.id)?t.id:"---",display_url:m,thumb:h,start_date:"",countries:[],tags:[]};d.tags[0]="organism",d.tags[1]=_,setWikidata(d,[],!0,"p"+explore.page),o.source.data.query.search.push(d)}),r([o])}})}function resolveInaturalist(e,s){const i="inaturalist";valid(e.value[0])?e.value[0]==="done"?datasources[i].done=!0:s[i]={data:e}:datasources[i].done=!0}function renderMarkInaturalist(e,s,i,a,r){}
