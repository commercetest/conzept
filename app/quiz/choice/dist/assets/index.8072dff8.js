import{env as kt,pipeline as Ct}from"https://cdn.jsdelivr.net/npm/@xenova/transformers@2.9.0";(function(){const l=document.createElement("link").relList;if(l&&l.supports&&l.supports("modulepreload"))return;for(const _ of document.querySelectorAll('link[rel="modulepreload"]'))r(_);new MutationObserver(_=>{for(const u of _)if(u.type==="childList")for(const d of u.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&r(d)}).observe(document,{childList:!0,subtree:!0});function i(_){const u={};return _.integrity&&(u.integrity=_.integrity),_.referrerpolicy&&(u.referrerPolicy=_.referrerpolicy),_.crossorigin==="use-credentials"?u.credentials="include":_.crossorigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function r(_){if(_.ep)return;_.ep=!0;const u=i(_);fetch(_.href,u)}})();let ot="";(function(e){let l=[],i=!1,r=!1,_,u=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(navigator.userAgent)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(navigator.userAgent),d=!1,g=!1,h=!1,b='<div id="lcl_wrap" class="lcl_pre_show lcl_pre_first_el lcl_first_sizing lcl_is_resizing"><div id="lcl_window"><div id="lcl_corner_close" title="close"></div><div id="lcl_loader" class="lcl_loader_pre_first_el"><span id="lcll_1"></span><span id="lcll_2"></span></div><div id="lcl_nav_cmd"><div class="lcl_icon lcl_prev" title="previous"></div><div class="lcl_icon lcl_play"></div><div class="lcl_icon lcl_next" title="next"></div><div class="lcl_icon lcl_counter"></div><div class="lcl_icon lcl_right_icon lcl_close" title="close"></div><div class="lcl_icon lcl_right_icon lcl_fullscreen" title="toggle fullscreen"></div><div class="lcl_icon lcl_right_icon lcl_filters_toggle toggle_menu" title="toggle filters"></div><div class="lcl_icon lcl_right_icon lcl_filters_image_quantize_toggle toggle_menu" title="toggle color palette"></div><div class="lcl_icon lcl_right_icon lcl_object_detection" title="object detection"></div><div class="lcl_icon lcl_right_icon lcl_revsearch" title="reverse image search"></div><div class="lcl_icon lcl_right_icon lcl_txt_toggle" title="toggle text"></div><div class="lcl_icon lcl_right_icon lcl_download" title="download"></div><div class="lcl_icon lcl_right_icon lcl_thumbs_toggle" title="toggle thumbnails"></div><div class="lcl_icon lcl_right_icon lcl_socials" title="toggle socials"></div><div class="lcl_icon lcl_right_icon lcl_openseadragon" title="image zoom"></div></div><div id="status"></div> <div id="lcl_contents_wrap"><div id="lcl_subj"><div id="lcl_elem_wrap"></div></div><div id="lcl_txt"></div></div></div><div id="lcl_thumbs_nav" class="lcl_pre_tn_scroll"></div><div id="lcl_overlay"></div><div id="imageColorQuantization" style="display:none;"><canvas id="quantize-canvas" style="display:none;"></canvas><div id="quantize-title">color palette</div><div id="palette"></div><div id="complementary" style="display:none;"></div></div><div id="mainImageEditArea" style="display:none;"><div id="mainImage"></div><div id="filter-title"><p>filters</p></div><div id="filter-reset"><div href="javascript:void(0)" onclick="window.resetFilters()">&#8634; reset</div></div><div id="imageEditing"><div class="filter-input"><p>brightness</p><input min="0" max="300" value="100" class="brightness" unit="%" type="range"></div><div class="filter-input"><p>contrast</p><input min="0" max="300" value="100" class="contrast"  unit="%" type="range"></div><div class="filter-input"><p>saturate</p><input min="0" max="300" value="100" class="contrast"  unit="%" type="range"></div><div class="filter-input"><p>color rotation</p><input value="0" min="0" max="360" class="hue-rotate" unit="deg" type="range"></div><div class="filter-input"><p>grayscale</p><input value="0" min="0" class="grayscale" unit="%" type="range"></div><div class="filter-input"><p>invert</p><input value="0" min="0" class="invert" unit="%" type="range"></div><div class="filter-input"><p>sepia</p><input value="0" min="0" class="sepia" unit="%" type="range"></div><div class="filter-input"><p>blur</p><input value="0" min="0" max="10" class="blur" unit="px" type="range"></div><div class="filter-input"><p>opacity</p><input min="0" value="100" class="opacity" unit="%" type="range"></div></div></div></div>';window.lc_lightbox=function(m,k){if(typeof m!="string"&&(typeof m!="object"||!m.length))return!1;var j=!1;if(e.each(l,function(v,s){if(JSON.stringify(s)==JSON.stringify(m))return j=s,!1}),j===!1){var x=new z(m,k);return l.push(x),x}return j};var z=function(m,k){var j=e.extend({gallery:!0,gallery_hook:"rel",live_elements:!0,preload_all:!1,global_type:"image",src_attr:"href",title_attr:"title",txt_attr:"data-lcl-txt",author_attr:"data-lcl-author",slideshow:!0,open_close_time:400,ol_time_diff:100,fading_time:80,animation_time:250,slideshow_time:6e3,autoplay:!1,counter:!1,progressbar:!0,carousel:!0,max_width:"93%",max_height:"93%",wrap_padding:!1,ol_opacity:.7,ol_color:"#111",ol_pattern:!1,border_w:0,border_col:"#ddd",padding:0,radius:0,shadow:!0,remove_scrollbar:!0,wrap_class:"",skin:"light",data_position:"over",cmd_position:"inner",ins_close_pos:"normal",nav_btn_pos:"normal",txt_hidden:500,show_title:!0,show_descr:!0,show_author:!0,thumbs_nav:!0,tn_icons:!0,tn_hidden:500,thumbs_w:110,thumbs_h:110,thumb_attr:!1,thumbs_maker_url:!1,fullscreen:!1,fs_img_behavior:"fit",fs_only:500,browser_fs_mode:!0,socials:!1,fb_share_params:!1,txt_toggle_cmd:!0,download:!1,touchswipe:!0,mousewheel:!0,modal:!1,rclick_prevent:!1,elems_parsed:function(){},html_is_ready:function(){},on_open:function(){},on_elem_switch:function(){},slideshow_start:function(){},slideshow_end:function(){},on_fs_enter:function(){},on_fs_exit:function(){},on_close:function(){}},k),x={elems:[],is_arr_instance:typeof m!="string"&&typeof m[0].childNodes>"u",elems_count:typeof m!="string"&&typeof m[0].childNodes>"u"?m.length:e(m).length,elems_selector:typeof m=="string"?m:!1,elem_index:!1,gallery_hook_val:!1,preload_all_used:!1,img_sizes_cache:[],inner_cmd_w:!1,txt_exists:!1,txt_und_sizes:!1,force_fullscreen:!1,html_style:"",body_style:""};typeof m=="string"&&(m=e(m));var v=e.data(m,"lcl_settings",j),s=e.data(m,"lcl_vars",x),T=function(t){if(typeof t!="string")return t;for(var n=0,c=0,o=t.toString().length;c<o;)n=(n<<5)-n+t.charCodeAt(c++)<<0;return n<0?n*-1:n},D=function(t){var n=!1;return e.each(s.elems,function(c,o){if(o.hash==t)return n=o,!1}),n},I=function(t){return t&&(t=t.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&").replace(/&quot;/g,'"').replace(/&#039;/g,"'"),e.trim(t))},X=function(t,n){var c=v,o=c[n];return o.indexOf("> ")!==-1?t.find(o.replace("> ","")).length?e.trim(t.find(o.replace("> ","")).html()):"":typeof t.attr(o)<"u"?I(t.attr(o)):""},dt=function(t){var n=v,c=[];return t.each(function(){var o=e(this),a=o.attr(n.src_attr),p=T(a);if(s.gallery_hook_val&&o.attr(n.gallery_hook)!=s.gallery_hook_val)return!0;var f=D(p);if(f)var y=f;else{var E=ut(a,o.data("lcl-type"));if(E!="unknown"){var y={src:a,type:E,hash:n.deeplink?T(a):!1,title:n.show_title?X(o,"title_attr"):"",txt:n.show_descr?X(o,"txt_attr"):"",author:n.show_author?X(o,"author_attr"):"",thumb:n.thumb_attr&&typeof n.thumb_attr<"u"?o.attr(n.thumb_attr):"",width:E!="image"&&typeof o.data("lcl-w")<"u"?o.data("lcl-w"):!1,height:E!="image"&&typeof o.data("lcl-h")<"u"?o.data("lcl-h"):!1,force_over_data:typeof o.data("lcl-force-over-data")<"u"?parseInt(o.data("lcl-force-over-data"),10):"",force_outer_cmd:typeof o.data("lcl-outer-cmd")<"u"?o.data("lcl-outer-cmd"):""};E=="image"?y.download=typeof o.data("lcl-path")<"u"?o.data("lcl-path"):a:y.download=!1}else var y={src:a,type:E,hash:n.deeplink?T(a):!1}}c.push(y)}),c.length<2&&e(".lcl_prev, .lcl_next, #lcl_thumb_nav").remove(),c.length?(s.elems=c,!0):!1},ut=function(t,n){if(typeof n>"u")return n=v.global_type,n;t=t.toLowerCase();var c=/^(http|https)?:\/\/(?:[a-z\-]+\.)+[a-z]{2,6}(?:\/[^\/#?]+)+\.(?:jpe?g|gif|png)$/;return c.test(t)?"image":"unknown"},qe=function(){if(s.elems.length<2||!v.gallery)return!1;s.elem_index>0&&B(!1,s.elem_index-1),s.elem_index!=s.elems.length-1&&B(!1,s.elem_index+1)},B=function(t,n,c){var o=s;if(typeof n>"u"&&(n=o.elem_index),typeof n>"u")return!1;if(o.elems[n].type=="image")var a=o.elems[n].type=="image"?o.elems[n].src:o.elems[n].poster;else var a="";a&&typeof o.img_sizes_cache[a]>"u"?e("<img/>").bind("load",function(){o.img_sizes_cache[a]={w:this.width,h:this.height},t&&n==o.elem_index&&De()}).attr("src",a):((t||typeof c<"u")&&e("#lcl_loader").addClass("no_loader"),t&&De())},Se=function(t,n){var c=e.data(t,"lcl_settings"),o=e.data(t,"lcl_vars");if(o.is_arr_instance){var a=[];e.each(t,function(E,w){var C={},N=typeof w.type>"u"&&c.global_type?c.global_type:!1;if(typeof w.type<"u"&&(N=w.type),N&&e.inArray(N,["image"])!==-1)typeof w.src<"u"&&w.src&&(C.src=w.src,C.type=N,C.hash=T(w.src),C.title=typeof w.title>"u"?"":I(w.title),C.txt=typeof w.txt>"u"?"":I(w.txt),C.author=typeof w.author>"u"?"":I(w.author),C.width=typeof w.width>"u"?!1:w.width,C.height=typeof w.height>"u"?!1:w.height,C.force_over_data=typeof w.force_over_data>"u"?!1:parseInt(w.force_over_data,10),C.force_outer_cmd=typeof w.force_outer_cmd>"u"?!1:w.force_outer_cmd,C.thumb=typeof w.thumb>"u"?!1:w.thumb,N=="image"?C.download=typeof w.download<"u"?w.download:w.src:C.download=!1,a.push(C));else{var C={src:C.src,type:"unknown",hash:c.deeplink?T(C.src):!1};a.push(C)}}),o.elems=a}else{var p=t;if(c.live_elements&&o.elems_selector){var f=!!(n&&c.gallery&&c.gallery_hook&&typeof e(m[0]).attr(c.gallery_hook)<"u"),y=f?o.elems_selector+"["+c.gallery_hook+"="+n.attr(c.gallery_hook)+"]":o.elems_selector;p=e(y)}if(!dt(p))return(!c.live_elements||c.live_elements&&!o.elems_selector)&&console.error("LC Lightbox - no valid elements found"),!1}if(c.preload_all&&!o.preload_all_used&&(o.preload_all_used=!0,e(document).ready(function(E){e.each(o.elems,function(w,C){B(!1,w)})})),typeof c.elems_parsed=="function"&&c.elems_parsed.call(null,v,s),!o.is_arr_instance){var p=o.elems_selector?e(o.elems_selector):t;p.first().trigger("lcl_elems_parsed",[o.elems])}return!0};Se(m);var $e=function(t,n){if(i||r)return!1;i=!0,r=!0,d=t,v=e.data(t,"lcl_settings"),s=e.data(t,"lcl_vars"),g=v,h=s;var c=v,o=s,a=typeof n<"u"?n:!1;if(!s)return console.error("LC Lightbox - cannot open. Object not initialized"),!1;if(o.gallery_hook_val=a&&c.gallery&&c.gallery_hook&&typeof a.attr(c.gallery_hook)<"u"?a.attr(c.gallery_hook):!1,!Se(t,n))return!1;if(a)e.each(o.elems,function(p,f){if(f.src==a.attr(c.src_attr))return o.elem_index=p,!1});else if(parseInt(o.elem_index,10)>=o.elems_count)return console.error("LC Lightbox - selected index does not exist"),!1;B(!1),mt(),bt(),o.force_fullscreen&&ge(!0,!0),e("#lcl_thumbs_nav").length&&wt(),B(!0),qe()},Fe=function(){e("#lcl_wrap").removeClass("lcl_pre_show").addClass("lcl_shown"),e("#lcl_loader").removeClass("lcl_loader_pre_first_el")},mt=function(){var t=v,n=s,c=[],o="";if(typeof document.documentMode=="number"&&(e("body").addClass("lcl_old_ie"),t.cmd_position!="outer"&&(t.nav_btn_pos="normal")),e("#lcl_wrap").length&&e("#lcl_wrap").remove(),e("body").append(b),e("#lcl_wrap").attr("data-lcl-max-w",t.max_width).attr("data-lcl-max-h",t.max_height),c.push("lcl_"+t.ins_close_pos+"_close lcl_nav_btn_"+t.nav_btn_pos+" lcl_"+t.ins_close_pos+"_close lcl_nav_btn_"+t.nav_btn_pos),(t.tn_hidden===!0||typeof t.tn_hidden=="number"&&(e(window).width()<t.tn_hidden||e(window).height()<t.tn_hidden))&&c.push("lcl_tn_hidden"),(t.txt_hidden===!0||typeof t.txt_hidden=="number"&&(e(window).width()<t.txt_hidden||e(window).height()<t.txt_hidden))&&c.push("lcl_hidden_txt"),t.carousel||c.push("lcl_no_carousel"),u&&c.push("lcl_on_mobile"),t.wrap_class&&c.push(t.wrap_class),c.push("lcl_"+t.cmd_position+"_cmd"),t.cmd_position!="inner"){var a=e("#lcl_nav_cmd").detach();e("#lcl_wrap").prepend(a)}if(t.slideshow||e(".lcl_play").remove(),t.txt_toggle_cmd||e(".lcl_txt_toggle").remove(),t.socials||e(".lcl_socials").remove(),t.download||e(".lcl_download").remove(),(!t.counter||n.elems.length<2||!t.gallery)&&e(".lcl_counter").remove(),n.force_fullscreen=!1,t.fullscreen?(t.fs_only===!0||typeof t.fs_only=="number"&&(e(window).width()<t.fs_only||e(window).height()<t.fs_only))&&(e(".lcl_fullscreen").remove(),s.force_fullscreen=!0):e(".lcl_fullscreen").remove(),n.elems.length<2||!t.gallery?e(".lcl_prev, .lcl_play, .lcl_next").remove():t.nav_btn_pos=="middle"&&(o+=".lcl_prev, .lcl_next {margin: "+t.padding+"px;}"),!t.thumbs_nav||s.elems.length<2||!t.gallery?e("#lcl_thumbs_nav, .lcl_thumbs_toggle").remove():(e("#lcl_thumbs_nav").css("height",t.thumbs_h),e("#lcl_thumbs_nav").outerHeight(!0)-t.thumbs_h,o+=".lcl_tn_hidden.lcl_outer_cmd:not(.lcl_fullscreen_mode) #lcl_window {margin-bottom: "+e(".lcl_close").outerHeight(!0)*-1+"px;}"),c.push("lcl_txt_"+t.data_position+" lcl_"+t.skin),o+="#lcl_overlay {background-color: "+t.thumbs_h+"px; opacity: "+t.ol_opacity+";}",t.ol_pattern&&e("#lcl_overlay").addClass("lcl_pattern_"+t.ol_pattern),t.modal&&e("#lcl_overlay").addClass("lcl_modal"),t.wrap_padding&&(o+="#lcl_wrap {padding: "+t.wrap_padding+";}"),t.border_w&&(o+="#lcl_window {border: "+t.border_w+"px solid "+t.border_col+";}"),t.padding&&(o+="#lcl_subj, #lcl_txt, #lcl_nav_cmd {margin: "+t.padding+"px;}"),t.radius&&(o+="#lcl_window, #lcl_contents_wrap {border-radius: "+t.radius+"px;}"),t.shadow&&(o+="#lcl_window {box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4);}"),t.cmd_position=="inner"&&t.ins_close_pos=="corner"&&(o+="#lcl_corner_close {top: "+(t.border_w+Math.ceil(e("#lcl_corner_close").outerWidth()/2))*-1+"px;right: "+(t.border_w+Math.ceil(e("#lcl_corner_close").outerHeight()/2))*-1+";}",e("#lcl_nav_cmd > *:not(.lcl_close)").length||(o+="#lcl_wrap:not(.lcl_fullscreen_mode):not(.lcl_forced_outer_cmd) #lcl_nav_cmd {display: none;}")),e("#lcl_inline_style").length&&e("#lcl_inline_style").remove(),e("head").append('<style type="text/css" id="lcl_inline_style">'+o+"#lcl_overlay {background-color: "+t.ol_color+";opacity: "+t.ol_opacity+";}#lcl_window, #lcl_txt, #lcl_subj {-webkit-transition-duration: "+t.animation_time+"ms; transition-duration: "+t.animation_time+"ms;}#lcl_overlay {-webkit-transition-duration: "+t.open_close_time+"ms; transition-duration: "+t.open_close_time+"ms;}.lcl_first_sizing #lcl_window, .lcl_is_closing #lcl_window {-webkit-transition-duration: "+(t.open_close_time-t.ol_time_diff)+"ms; transition-duration: "+(t.open_close_time-t.ol_time_diff)+"ms;}.lcl_first_sizing #lcl_window {-webkit-transition-delay: "+t.ol_time_diff+"ms; transition-delay: "+t.ol_time_diff+"ms;}#lcl_loader, #lcl_contents_wrap, #lcl_corner_close {-webkit-transition-duration: "+t.fading_time+"ms; transition-duration: "+t.fading_time+"ms;}.lcl_toggling_txt #lcl_subj {-webkit-transition-delay: "+(t.fading_time+200)+"ms !important;  transition-delay: "+(t.fading_time+200)+"ms !important;}.lcl_fullscreen_mode.lcl_txt_over:not(.lcl_tn_hidden) #lcl_txt, .lcl_fullscreen_mode.lcl_force_txt_over:not(.lcl_tn_hidden) #lcl_txt {max-height: calc(100% - 42px - "+t.thumbs_h+"px);}.lcl_fullscreen_mode.lcl_playing_video.lcl_txt_over:not(.lcl_tn_hidden) #lcl_txt,.lcl_fullscreen_mode.lcl_playing_video.lcl_force_txt_over:not(.lcl_tn_hidden) #lcl_txt {max-height: calc(100% - 42px - 45px - "+t.thumbs_h+"px);}</style>"),t.remove_scrollbar){s.html_style=typeof jQuery("html").attr("style")<"u"?jQuery("html").attr("style"):"",s.body_style=typeof jQuery("body").attr("style")<"u"?jQuery("body").attr("style"):"";var p=e(window).width();e("html").css("overflow","hidden"),e("html").css({"margin-right":e(window).width()-p,"touch-action":"none"}),e("body").css({overflow:"visible","touch-action":"none"})}var f=s.elems[n.elem_index];if(f.type!="image"||f.type=="image"&&typeof n.img_sizes_cache[f.src]<"u"?c.push("lcl_show_already_shaped"):Fe(),e("#lcl_wrap").addClass(c.join(" ")),typeof t.html_is_ready=="function"&&t.html_is_ready.call(null,v,s),!s.is_arr_instance){var y=s.elems_selector?e(s.elems_selector):d;y.first().trigger("lcl_html_is_ready",[v,s])}},pt=function(t){var n=e(t)[0],c=null;n.addEventListener("touchstart",function(p){p.targetTouches.length===1&&(c=p.targetTouches[0].clientY)},!1),n.addEventListener("touchmove",function(p){p.targetTouches.length===1&&o(p)},!1);function o(p){var f=p.targetTouches[0].clientY-c;n.scrollTop===0&&f>0&&p.preventDefault(),a()&&f<0&&p.preventDefault()}function a(){return n.scrollHeight-n.scrollTop<=n.clientHeight}},De=function(){if(!i)return!1;var t=s,n=t.elems[t.elem_index];if(e("#lcl_wrap").attr("lc-lelem",t.elem_index),v.carousel||(e("#lcl_wrap").removeClass("lcl_first_elem lcl_last_elem"),t.elem_index?t.elem_index==t.elems.length-1&&e("#lcl_wrap").addClass("lcl_last_elem"):e("#lcl_wrap").addClass("lcl_first_elem")),e(document).trigger("lcl_before_populate_global",[n,t.elem_index]),ft(n),!t.is_arr_instance){var c=t.elems_selector?e(t.elems_selector):d;c.first().trigger("lcl_before_show",[n,t.elem_index])}if(e(document).trigger("lcl_before_show_global",[n,t.elem_index]),e("#lcl_wrap").hasClass("lcl_pre_first_el")&&(typeof v.on_open=="function"&&v.on_open.call(null,v,s),!t.is_arr_instance)){var c=t.elems_selector?e(t.elems_selector):d;c.first().trigger("lcl_on_open",[n,t.elem_index])}P(n),e("#lcl_subj").removeClass("lcl_switching_el"),rt()},fe=function(t){return!!(t.title||t.txt||t.author)},ft=function(t){var n=s.elem_index;switch(e("#lcl_elem_wrap").removeAttr("style").removeAttr("class").empty(),e("#lcl_wrap").attr("lcl-type",t.type),e("#lcl_elem_wrap").addClass("lcl_"+t.type+"_elem"),t.type){case"image":e("#lcl_elem_wrap").css("background-image","url('"+t.src+"')"),ot=t.src,e("#imageColorQuantization").hide(),e("#palette").empty();break;default:e("#lcl_elem_wrap").html('<div id="lcl_inline" class="lcl_elem"><br/>Error loading the resource .. </div>');break}if(g.download)if(t.download){e(".lcl_download").show();var c=t.download.split("/"),o=c[c.length-1];e(".lcl_download").html('<a href="'+t.download+'" target="_blank" download="'+o+'"></a>')}else e(".lcl_download").hide();e(".lcl_counter").html(n+1+" / "+s.elems.length),fe(t)&&t.type!="unknown"?(e("#lcl_wrap").removeClass("lcl_no_txt"),e(".lcl_txt_toggle").show(),t.title&&e("#lcl_txt").append('<h3 id="lcl_title">'+t.title+"</h3>"),t.author&&e("#lcl_txt").append('<h5 id="lcl_author">by '+t.author+"</h5>"),t.txt&&e("#lcl_txt").append('<section id="lcl_descr">'+t.txt+"</section>"),t.txt&&(t.title&&t.author?e("#lcl_txt h5").addClass("lcl_txt_border"):e("#lcl_txt h3").length?e("#lcl_txt h3").addClass("lcl_txt_border"):e("#lcl_txt h5").addClass("lcl_txt_border"))):(e(".lcl_txt_toggle").hide(),e("#lcl_wrap").addClass("lcl_no_txt")),pt("#lcl_txt")},He=function(t,n,c){if(typeof t===void 0||typeof t>"u")return 1;var o=0,a=e("#lcl_wrap"),p=e(window).width()-parseInt(a.css("padding-left"),10)-parseInt(a.css("padding-right"),10),f=e(window).height()-parseInt(a.css("padding-top"),10)-parseInt(a.css("padding-bottom"),10);if(!isNaN(parseFloat(t))&&isFinite(t))o=parseInt(t,10);else if(t.toString().indexOf("%")!==-1){var y=n=="w"?p:f;o=y*(parseInt(t,10)/100)}else t.toString().indexOf("vw")!==-1?o=p*(parseInt(t,10)/100):t.toString().indexOf("vh")!==-1&&(o=f*(parseInt(t,10)/100));return typeof c>"u"&&(n=="w"&&o>p&&(o=p),n=="h"&&o>f&&(o=f)),o},P=function(t,n,c){var o=v,a=s,p,f;typeof n>"u"&&(n={});var y=!!e(".lcl_fullscreen_mode").length,E=y?0:parseInt(o.border_w,10)*2+parseInt(o.padding,10)*2;typeof n.side_txt_checked>"u"&&(typeof n.no_txt_under>"u"||!n.no_txt_under)&&e("#lcl_wrap").removeClass("lcl_force_txt_over");var w=!e(".lcl_force_txt_over").length&&!e(".lcl_hidden_txt").length&&e.inArray(o.data_position,["rside","lside"])!==-1&&fe(t)?e("#lcl_txt").outerWidth():0,C=!y&&e("#lcl_thumbs_nav").length&&!e(".lcl_tn_hidden").length?e("#lcl_thumbs_nav").outerHeight(!0)-parseInt(e("#lcl_wrap").css("padding-bottom"),10):0,N=!y&&e(".lcl_outer_cmd").length?e(".lcl_close").outerHeight(!0)+parseInt(e("#lcl_nav_cmd").css("padding-top"),10)+parseInt(e("#lcl_nav_cmd").css("padding-bottom"),10):0,G=E+w,H=E+C+N,ce=e("#lcl_wrap").attr("data-lcl-max-w"),W=e("#lcl_wrap").attr("data-lcl-max-h"),ae=y?e(window).width():Math.floor(He(ce,"w"))-G,V=y?e(window).height():Math.floor(He(W,"h"))-H;if(typeof a.txt_und_sizes=="object"){if(p=a.txt_und_sizes.w,f=a.txt_und_sizes.h,t.type=="image")var M=a.img_sizes_cache[t.src]}else switch(t.type){case"image":if(e("#lcl_elem_wrap").css("bottom",0),typeof a.img_sizes_cache[t.src]>"u")return!1;var M=a.img_sizes_cache[t.src];if(M.w<=ae?(p=M.w,f=M.h):(p=ae,f=Math.floor(p*(M.h/M.w))),f>V&&(f=V,p=Math.floor(f*(M.w/M.h))),fe(t)&&!e(".lcl_hidden_txt").length&&o.data_position=="under"&&typeof n.no_txt_under>"u")return Re(p,f,V),e(document).off("lcl_txt_und_calc").on("lcl_txt_und_calc",function(){if(a.txt_und_sizes)return a.txt_und_sizes=="no_under"&&(n.no_txt_under=!0),P(a.elems[a.elem_index],n)}),!1;e("#lcl_subj").css("maxHeight","none");break;default:p=280,f=125;break}if((o.data_position=="rside"||o.data_position=="lside")&&!e(".lcl_no_txt").length&&typeof n.side_txt_checked>"u"){var ye=p+E,K=f+E,M=t.type=="image"?a.img_sizes_cache[t.src]:"",Z=t.force_over_data;if(Z||(Z=400),t.type=="image"&&M.w>Z&&M.h>Z&&!ht(t,Z,ye,K))return n.side_txt_checked=!0,P(t,n)}if(a.txt_und_sizes=!1,typeof n.inner_cmd_checked>"u"&&(o.cmd_position=="inner"||t.force_outer_cmd)&&gt(t,p))return n.inner_cmd_checked=!0,P(t,n);e("#lcl_wrap").removeClass("lcl_pre_first_el"),e("#lcl_window").css({width:y?"100%":p+E+w,height:y?"100%":f+E}),e(".lcl_show_already_shaped").length&&setTimeout(function(){e("#lcl_wrap").removeClass("lcl_show_already_shaped"),Fe()},10),Xe(),typeof Je<"u"&&clearTimeout(Je);var Ye=e(".lcl_first_sizing").length?o.open_close_time+20:o.animation_time;(e(".lcl_browser_resize").length||e(".lcl_toggling_fs").length||y)&&(Ye=0);var Je=setTimeout(function(){r&&(r=!1),e(".lcl_first_sizing").length&&o.autoplay&&a.elems.length>1&&(o.carousel||a.elem_index<a.elems.length-1)&&Ve(),t.type=="image"&&(e(".lcl_fullscreen_mode").length?vt(M):e(".lcl_image_elem").css("background-size","cover")),e("#lcl_wrap").removeClass("lcl_first_sizing lcl_switching_elem lcl_is_resizing lcl_browser_resize"),e("#lcl_loader").removeClass("no_loader"),e(document).trigger("lcl_resized_window")},Ye)};e(window).resize(function(){if(!i||m!=d||e(".lcl_toggling_fs").length)return!1;e("#lcl_wrap").addClass("lcl_browser_resize"),typeof t<"u"&&clearTimeout(t);var t=setTimeout(function(){we()},50)});var Re=function(t,n,c,o){var a=typeof o>"u"?1:o,p=e(".lcl_fullscreen_mode").length;Math.ceil(e("#lcl_txt").outerHeight());var f=t/n;if(p&&e("#lcl_thumbs_nav").length)return e("#lcl_wrap").addClass("lcl_force_txt_over"),e("#lcl_subj").css("maxHeight","none"),e("#lcl_txt").css({right:0,width:"auto"}),s.txt_und_sizes="no_under",e(document).trigger("lcl_txt_und_calc"),!1;e("#lcl_wrap").removeClass("lcl_force_txt_over").addClass("lcl_txt_under_calc"),p?e("#lcl_txt").css({right:0,width:"auto"}):e("#lcl_txt").css({right:"auto",width:t}),typeof lcl_txt_under_calc<"u"&&clearInterval(lcl_txt_under_calc),lcl_txt_under_calc=setTimeout(function(){var y=Math.ceil(e("#lcl_txt").outerHeight()),E=n+y-c;if(p)return e("#lcl_wrap").removeClass("lcl_txt_under_calc"),e("#lcl_subj").css("maxHeight","calc(100% - "+y+"px)"),s.txt_und_sizes={w:t,h:n},e(document).trigger("lcl_txt_und_calc"),!1;if(E>0&&(typeof o>"u"||o<10)){var w=n-E,C=Math.floor(w*f),N=s.elems[s.elem_index].force_over_data;return N||(N=400),C<N||w<N?(e("#lcl_wrap").removeClass("lcl_txt_under_calc").addClass("lcl_force_txt_over"),e("#lcl_subj").css("maxHeight","none"),e("#lcl_txt").css({right:0,width:"auto"}),s.txt_und_sizes="no_under",e(document).trigger("lcl_txt_und_calc"),!0):Re(C,w,c,a+1)}else return e("#lcl_wrap").removeClass("lcl_txt_under_calc"),e("#lcl_subj").css("maxHeight",n+v.padding),s.txt_und_sizes={w:t,h:n+y},e(document).trigger("lcl_txt_und_calc"),!0},120)},ht=function(t,n,c,o,a){var p=e(".lcl_force_txt_over").length;if(c<n||t.type!="html"&&o<n){if(p)return!0;e("#lcl_wrap").addClass("lcl_force_txt_over")}else{if(!p)return!0;e("#lcl_wrap").removeClass("lcl_force_txt_over")}return!1},gt=function(t,n){var c=v,o=!!e(".lcl_fullscreen_mode").length;if(e(".lcl_forced_outer_cmd").length){e("#lcl_wrap").removeClass("lcl_forced_outer_cmd"),e("#lcl_wrap").removeClass("lcl_outer_cmd").addClass("lcl_inner_cmd");var a=e("#lcl_nav_cmd").detach();e("#lcl_window").prepend(a)}if(!o&&s.inner_cmd_w===!1&&(s.inner_cmd_w=0,jQuery("#lcl_nav_cmd .lcl_icon").each(function(){if((e(this).hasClass("lcl_prev")||e(this).hasClass("lcl_next"))&&c.nav_btn_pos=="middle")return!0;s.inner_cmd_w=s.inner_cmd_w+e(this).outerWidth(!0)})),o||t.force_outer_cmd||n<=s.inner_cmd_w){e("#lcl_wrap").addClass("lcl_forced_outer_cmd"),e("#lcl_wrap").removeClass("lcl_inner_cmd").addClass("lcl_outer_cmd");var a=e("#lcl_nav_cmd").detach();return e("#lcl_wrap").prepend(a),!0}else return!1},A=function(t,n){var c=s,o=v.carousel;if(e("#status").hide(),r||c.elems.length<2||!v.gallery||e(".lcl_switching_elem").length)return!1;if(t=="next")if(c.elem_index==c.elems.length-1){if(!o)return!1;t=0}else t=c.elem_index+1;else if(t=="prev")if(c.elem_index)t=c.elem_index-1;else{if(!o)return!1;t=c.elems.length-1}else if(t=parseInt(t,10),t<0||t>=c.elems.length||t==c.elem_index)return!1;typeof _<"u"&&(typeof n>"u"||!o&&t==c.elems.length-1)&&re(),r=!0,We(t),B(!1,t,!0),e("#lcl_wrap").addClass("lcl_switching_elem"),setTimeout(function(){if(e("#lcl_wrap").removeClass("lcl_playing_video"),c.elems[c.elem_index].type=="html"&&(e("#lcl_window").css("height",e("#lcl_contents_wrap").outerHeight()),e("#lcl_contents_wrap").css("maxHeight","none")),typeof v.on_elem_switch=="function"&&v.on_elem_switch.call(null,v,s,t),!c.is_arr_instance&&d){var a=c.elems_selector?e(c.elems_selector):d;a.first().trigger("lcl_on_elem_switch",[c.elem_index,t])}e("#lcl_wrap").removeClass("lcl_no_txt lcl_loading_iframe"),e("#lcl_txt").empty(),c.elem_index=t,B(!0),qe()},v.fading_time)},Pe=function(t){var n=v;if(!n.progressbar)return!1;var c=t?0:n.animation_time+n.fading_time,o=n.slideshow_time+n.animation_time-c;e("#lcl_progressbar").length||e("#lcl_wrap").append('<div id="lcl_progressbar"></div>'),typeof a<"u"&&clearTimeout(a);var a=setTimeout(function(){e("#lcl_progressbar").stop(!0).removeAttr("style").css("width",0).animate({width:"100%"},o,"linear",function(){e("#lcl_progressbar").fadeTo(0,0)})},c)},he=function(){if(!i)return!1;if(typeof v.on_close=="function"&&v.on_close.call(null,v,s),!s.is_arr_instance){var t=s.elems_selector?e(s.elems_selector):d;t.first().trigger("lcl_on_close")}e(document).trigger("lcl_on_close_global"),e("#lcl_wrap").removeClass("lcl_shown").addClass("lcl_is_closing lcl_tn_hidden"),re(),e(".lcl_fullscreen_mode").length&&Be(),setTimeout(function(){e("#lcl_wrap, #lcl_inline_style").remove(),v.remove_scrollbar&&(jQuery("html").attr("style",s.html_style),jQuery("body").attr("style",s.body_style)),e(document).trigger("lcl_closed_global"),d=!1,g=!1,h=!1,i=!1,r=!1},v.open_close_time+80),typeof lcl_size_check<"u"&&clearTimeout(lcl_size_check)},ge=function(t,n){if(typeof n>"u"&&(n=!1),!i||!v.fullscreen||!n&&r)return!1;var c=v,o=s;e("#lcl_wrap").addClass("lcl_toggling_fs"),c.browser_fs_mode&&typeof t<"u"&&(document.documentElement.requestFullscreen?document.documentElement.requestFullscreen():document.documentElement.msRequestFullscreen?document.documentElement.msRequestFullscreen():document.documentElement.mozRequestFullScreen?document.documentElement.mozRequestFullScreen():document.documentElement.webkitRequestFullscreen&&document.documentElement.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT));var a=n?c.open_close_time:c.fading_time;setTimeout(function(){e("#lcl_wrap").addClass("lcl_fullscreen_mode"),P(o.elems[o.elem_index]),e(document).on("lcl_resized_window",function(){e(document).off("lcl_resized_window"),(n||g.data_position=="under"&&!e(".lcl_force_txt_over").length)&&P(h.elems[h.elem_index]),setTimeout(function(){e("#lcl_wrap").removeClass("lcl_toggling_fs")},150)})},a),typeof c.on_fs_enter=="function"&&c.on_fs_enter.call(null,c,o),s.is_arr_instance||d.first().trigger("lcl_on_fs_enter")},vt=function(t){var n=v.fs_img_behavior;if(e(".lcl_fullscreen_mode").length&&t.w<=e("#lcl_subj").width()&&t.h<=e("#lcl_subj").height())return e(".lcl_image_elem").css("background-size","auto"),!1;if(n=="fit")e(".lcl_image_elem").css("background-size","contain");else if(n=="fill")e(".lcl_image_elem").css("background-size","cover");else{if(typeof t>"u")return e(".lcl_image_elem").css("background-size","cover"),!1;var c=e(window).width()/e(window).height()-t.w/t.h,o=e(window).width()-t.w,a=e(window).height()-t.h;c<=1.15&&c>=-1.15&&o<=350&&a<=350?e(".lcl_image_elem").css("background-size","cover"):e(".lcl_image_elem").css("background-size","contain")}},Oe=function(t){if(window.viewer.setVisible(!1),!i||!v.fullscreen||r)return!1;var n=v;if(e("#lcl_wrap").addClass("lcl_toggling_fs"),e("#lcl_window").fadeTo(70,0),setTimeout(function(){if(n.browser_fs_mode&&typeof t<"u"){Be();var o=250}else var o=0;e("#lcl_wrap").removeClass("lcl_fullscreen_mode"),setTimeout(function(){P(s.elems[s.elem_index]);var a=a||navigator.userAgent,p=a.indexOf("MSIE ")>-1||a.indexOf("Trident/")>-1?100:0;setTimeout(function(){e("#lcl_window").fadeTo(30,1),e("#lcl_wrap").removeClass("lcl_toggling_fs")},300+p)},o)},70),typeof n.on_fs_exit=="function"&&n.on_fs_exit.call(null,v,s),!s.is_arr_instance){var c=s.elems_selector?e(s.elems_selector):d;c.first().trigger("lcl_on_fs_exit")}},Be=function(){document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen()},wt=function(){var t=!1,n=!1,c=Date.now();if(e("#lcl_thumbs_nav").append('<span class="lcl_tn_prev"></span><ul class="lcl_tn_inner"></ul><span class="lcl_tn_next"></span>'),e("#lcl_thumbs_nav").attr("rel",c),e.each(s.elems,function(o,a){if(a.type!="unknown"){t||(!n||n==a.type?n=a.type:t=!0);var p="",f="",y="";if(a.thumb)f=a.thumb,p=`style="background-image: url('`+a.thumb+`');"`;else{switch(a.type){case"image":f=a.src;break;case"youtube":f=a.poster?a.poster:"https://img.youtube.com/vi/"+a.video_id+"/maxresdefault.jpg";break;case"vimeo":if(a.poster){f=a.poster;break}else typeof s.vimeo_thumb_cache[a.src]>"u"?(y="lcl_tn_preload",e.getJSON("https://www.vimeo.com/api/v2/video/"+a.video_id+".json?callback=?",{format:"json"},function(C){Ue(C[0].thumbnail_large,o,c),s.vimeo_thumb_cache[a.src]=C[0].thumbnail_large,e(".lcl_tn_inner li[rel="+o+"]").attr("style",e(".lcl_tn_inner li[rel="+o+"]").attr("style")+" background-image: url('"+C[0].thumbnail_large+"');")})):f=s.vimeo_thumb_cache[a.src];break;case"video":case"iframe":case"html":a.poster&&(f=a.poster);break;case"dailymotion":f=a.poster?a.poster:"http://www.dailymotion.com/thumbnail/video/"+a.video_id;break}if(f){if(v.thumbs_maker_url&&(a.poster||e.inArray(a.type,["youtube","vimeo","dailymotion"])===-1)){var E=v.thumbs_maker_url;f=E.replace("%URL%",encodeURIComponent(f)).replace("%W%",v.thumbs_w).replace("%H%",v.thumbs_h)}p=`style="background-image: url('`+f+`');"`,e.inArray(a.type,["youtube","vimeo","dailymotion"])!==-1&&!a.poster&&(s.elems[o].vid_poster=f)}}if((a.type=="html"||a.type=="iframe")&&!p)return!0;var w=a.type=="video"&&!p?'<video src="'+a.src+'"></video>':"";y="lcl_tn_preload",e(".lcl_tn_inner").append('<li class="lcl_tn_'+a.type+" "+y+'" title="'+a.title+'" rel="'+o+'" '+p+">"+w+"</li>"),y&&Ue(f,o,c)}}),e(".lcl_tn_inner > li").length<2)return e("#lcl_thumbs_nav").remove(),!1;e(".lcl_tn_inner > li").css("width",v.thumbs_w),u||e(".lcl_tn_inner").lcl_smoothscroll(.3,400,!1,!0),t&&v.tn_icons&&e(".lcl_tn_inner").addClass("lcl_tn_mixed_types"),setTimeout(function(){We(s.elem_index)},300)},Ue=function(t,n,c){e("<img/>").bind("load",function(){if(!s)return!1;s.img_sizes_cache[t]={w:this.width,h:this.height},e("#lcl_thumbs_nav[rel="+c+"] li[rel="+n+"]").removeClass("lcl_tn_preload"),setTimeout(function(){Xe(),ve()},500)}).attr("src",t)},Qe=function(){var t=0;return e(".lcl_tn_inner > li").each(function(){t=t+e(this).outerWidth(!0)}),t},Xe=function(){if(!e("#lcl_thumbs_nav").length)return!1;Qe()>e(".lcl_tn_inner").width()?e("#lcl_thumbs_nav").addClass("lcl_tn_has_arr"):e("#lcl_thumbs_nav").removeClass("lcl_tn_has_arr")},ve=function(){var t=e(".lcl_tn_inner").scrollLeft();t?e(".lcl_tn_prev").removeClass("lcl_tn_disabled_arr").stop(!0).fadeTo(150,1):e(".lcl_tn_prev").addClass("lcl_tn_disabled_arr").stop(!0).fadeTo(150,.5),t>=Qe()-e(".lcl_tn_inner").width()?e(".lcl_tn_next").addClass("lcl_tn_disabled_arr").stop(!0).fadeTo(150,.5):e(".lcl_tn_next").removeClass("lcl_tn_disabled_arr").stop(!0).fadeTo(150,1)};e(document).on("lcl_smoothscroll_end",".lcl_tn_inner",function(t){if(m!=d)return!0;ve()});var We=function(t){var n=e(".lcl_tn_inner > li[rel="+t+"]");if(!n.length)return!1;var c=0;e(".lcl_tn_inner > li").each(function(y,E){if(e(this).attr("rel")==t)return c=y,!1});var o=e(".lcl_tn_inner > li").last().outerWidth(),a=parseInt(e(".lcl_tn_inner > li").last().css("margin-left"),10);e(".lcl_tn_inner").width();var p=Math.floor((e(".lcl_tn_inner").width()-o-a)/2),f=o*c+a*(c-1)+Math.floor(a/2)-p;e(".lcl_tn_inner").stop(!0).animate({scrollLeft:f},500,function(){e(".lcl_tn_inner").trigger("lcl_smoothscroll_end"),e("#lcl_thumbs_nav").removeClass("lcl_pre_tn_scroll")}),e(".lcl_tn_inner > li").removeClass("lcl_sel_thumb"),n.addClass("lcl_sel_thumb")};e.fn.lcl_smoothscroll=function(t,n,c,o){if(u)return!1;this.off("mousemove mousedown mouseup mouseenter mouseleave");var a=this,p=typeof c>"u"||!c,f=typeof o>"u"||!o,y=!1,E=!1,w=0,C=0,N=0,G=0;a.mousemove(function(H){E===!0&&(a.stop(!0),p&&a.scrollLeft(G+(C-H.pageX)),f&&a.scrollTop(N+(w-H.pageY)))}),a.mouseover(function(){y&&clearTimeout(y)}),a.mouseout(function(){y=setTimeout(function(){E=!1,y=!1},500)}),a.mousedown(function(H){typeof lc_sms_timeout<"u"&&clearTimeout(lc_sms_timeout),E=!0,N=a.scrollTop(),G=a.scrollLeft(),w=H.pageY,C=H.pageX}),a.mouseup(function(H){E=!1;var ce=a.scrollTop(),W=(N-ce)*-1,ae=ce+W*t,V=a.scrollLeft(),M=(G-V)*-1,ye=V+M*t;if(W<3&&W>-3&&M<3&&M>-3)return e(H.target).trigger("lcl_tn_elem_click"),!1;if(W>20||M>20){var K={};f&&(K.scrollTop=ae),p&&(K.scrollLeft=ye),a.stop(!0).animate(K,n,"linear",function(){a.trigger("lcl_smoothscroll_end")})}})},x.is_arr_instance||(j.live_elements&&x.elems_selector?e(document).off("click",x.elems_selector).on("click",x.elems_selector,function(t){t.preventDefault();var n=e.data(m,"lcl_vars");n.elems_count=e(x.elems_selector).length,$e(m,e(this)),m.first().trigger("lcl_clicked_elem",[e(this)])}):(m.off("click"),m.on("click",function(t){t.preventDefault(),$e(m,e(this)),m.first().trigger("lcl_clicked_elem",[e(this)])}))),e(document).on("click","#lcl_overlay:not(.lcl_modal), .lcl_close, #lcl_corner_close",function(t){if(m!=d)return!0;he()}),e(document).on("click",".lcl_prev",function(t){if(m!=d)return!0;A("prev")}),e(document).on("click",".lcl_next",function(t){if(m!=d)return!0;A("next")}),e(document).bind("keydown",function(t){if(i){if(m!=d)return!0;t.keyCode==39?(t.preventDefault(),A("next")):t.keyCode==37?(t.preventDefault(),A("prev")):t.keyCode==27?(t.preventDefault(),he()):t.keyCode==122&&v.fullscreen&&(typeof lcl_fs_key_timeout<"u"&&clearTimeout(lcl_fs_key_timeout),lcl_fs_key_timeout=setTimeout(function(){e(".lcl_fullscreen_mode").length?Oe():ge()},50))}}),e(document).on("wheel","#lcl_overlay, #lcl_window, #lcl_thumbs_nav:not(.lcl_tn_has_arr)",function(t){if(m!=d||!g.mousewheel)return!0;var n=e(t.target);if(!n.is("#lcl_window")&&!n.parents("#lcl_window").length){t.preventDefault();var c=t.originalEvent.deltaY;c>0?A("next"):A("prev")}else{for(var o=!0,a=0;a<20&&!n.is("#lcl_window");a++)if(n[0].scrollHeight>n.outerHeight()){o=!1;break}else n=n.parent();if(o){t.preventDefault();var c=t.originalEvent.deltaY;c>0?A("next"):A("prev")}}}),e(document).on("click",".lcl_image_elem",function(t){if(m!=d)return!0;setTimeout(function(){e(".lcl_zoom_wrap").length||A("next")},250)}),e(document).on("dblclick",".lcl_image_elem",function(t){if(m!=d||!g.img_zoom||!e(".lcl_zoom_icon").length)return!0;typeof lcl_img_click_track<"u"&&(clearTimeout(lcl_img_click_track),zoom(!0))}),e(document).on("click",".lcl_revsearch",function(t){if(m!=d)return!0;var n=h.elems[h.elem_index];window.open("https://www.bing.com/images/search?view=detailv2&iss=sbi&form=SBIHMP&sbisrc=UrlPaste&q=imgurl:"+n.src,"_blank")}),e(document).on("click",".lcl_object_detection",async function(t){if(m!=d)return!0;var n=h.elems[h.elem_index];kt.allowLocalModels=!1,document.getElementById("lcl_elem_wrap"),e("#status").show(),e("#status").text("loading model..."),window.detector=await Ct("object-detection","Xenova/detr-resnet-50"),e("#status").text("detecting objects...");const c=n.src;if(!c)return;const o=new FileReader;o.onload=p=>window.detect(p.target.result);let a=await fetch(c).then(p=>p.blob());o.readAsDataURL(a)}),e(document).on("click",".lcl_openseadragon",function(t){if(e("#status").hide(),e("#loader-openseadragon").show(),m!=d)return!0;var n=h.elems[h.elem_index],c=n.src.replace(/\d+px-/,"3200px-");e("#openseadragon").show,e("#openseadragon").css("display","inline"),window.viewer.setFullScreen(!0),window.viewer.setVisible(!0),window.viewer.open({type:"image",url:c})}),e(document).on("click",".lcl_txt_toggle",function(t){if(m!=d)return!0;var n=v;if(!r&&!e(".lcl_no_txt").length&&!e(".lcl_toggling_txt").length)if(n.data_position!="over"){var c=n.data_position=="rside"||n.data_position=="lside",o=e(".lcl_force_txt_over").length,a=n.animation_time<150?n.animation_time:150,p=0;c&&!o?e("#lcl_subj").fadeTo(a,0):o||(e("#lcl_contents_wrap").fadeTo(a,0),p=a),setTimeout(function(){e("#lcl_wrap").toggleClass("lcl_hidden_txt")},p),o||(r=!0,e("#lcl_wrap").addClass("lcl_toggling_txt"),setTimeout(function(){r=!1,we()},n.animation_time),setTimeout(function(){e("#lcl_wrap").removeClass("lcl_toggling_txt"),c&&!o?e("#lcl_subj").fadeTo(a,1):o||e("#lcl_contents_wrap").fadeTo(a,1)},n.animation_time*2+50))}else e("#lcl_wrap").toggleClass("lcl_hidden_txt")}),e(document).on("click",".lcl_play",function(t){if(m!=d)return!0;e(".lcl_is_playing").length?re():Ve()}),e(document).on("click",".lcl_elem",function(t){if(m!=d)return!0;!e(".lcl_playing_video").length&&e.inArray(e("#lcl_wrap").attr("lcl-type"),["video"])!==-1&&(re(),e("#lcl_wrap").addClass("lcl_playing_video"))}),e(document).on("click",".lcl_socials",function(t){if(m!=d)return!0;if(e(".lcl_socials > div").length)e(".lcl_socials_tt").removeClass("lcl_show_tt"),setTimeout(function(){e(".lcl_socials").removeClass("lcl_socials_shown").empty()},260);else{var n=h.elems[h.elem_index],c=encodeURIComponent(window.location.href),o=encodeURIComponent(n.title).replace(/'/g,"\\'"),a=encodeURIComponent(n.txt).replace(/'/g,"\\'");if(n.type=="image")var p=n.src;else{var p=n.poster?n.poster:!1;!p&&typeof n.vid_poster<"u"&&(p=n.vid_poster)}var f='<div class="lcl_socials_tt lcl_tooltip lcl_tt_bottom">';if(g.fb_share_params){var y=c;y+=window.location.href.indexOf("?")===-1?"%3F":"%26",y+=encodeURIComponent(g.fb_share_params.replace("%TITLE%",o).replace("%DESCR%",a).replace("%IMG%",p)),f+=`<a class="lcl_icon lcl_fb" onClick="window.open('https://www.facebook.com/sharer?u=`+y+`&display=popup','sharer','toolbar=0,status=0,width=590,height=500');" href="javascript: void(0)"></a>`}else f+=`<a class="lcl_icon lcl_fb" onClick="window.open('https://www.facebook.com/sharer?u=`+c+`&display=popup','sharer','toolbar=0,status=0,width=590,height=325');" href="javascript: void(0)"></a>`;f+=`<a class="lcl_icon lcl_twit" onClick="window.open('https://twitter.com/share?text=Check%20out%20%22`+o+"%22%20@&url="+c+`','sharer','toolbar=0,status=0,width=548,height=325');" href="javascript: void(0)"></a>`,u&&(f+='<br/><a class="lcl_icon lcl_wa" href="whatsapp://send?text='+c+'" data-action="share/whatsapp/share"></a>'),p&&(f+=`<a class="lcl_icon lcl_pint" onClick="window.open('http://pinterest.com/pin/create/button/?url=`+c+"&media="+encodeURIComponent(p)+"&description="+o+`','sharer','toolbar=0,status=0,width=575,height=330');" href="javascript: void(0)"></a>`),f+="</div>",e(".lcl_socials").addClass("lcl_socials_shown").html(f),setTimeout(function(){e(".lcl_socials_tt").addClass("lcl_show_tt")},20),g.fb_direct_share&&e(document).off("click",".lcl_fb").on("click",".lcl_fb",function(E){FB.ui({method:"share_open_graph",action_type:"og.shares",action_properties:JSON.stringify({object:{"og:url":window.location.href,"og:title":n.title,"og:description":n.txt,"og:image":p}})},function(w){window.close()})})}}),e(document).on("click",".lcl_fullscreen",function(t){if(m!=d)return!0;e(".lcl_fullscreen_mode").length?Oe(!0):ge(!0)}),e(document).on("click",".lcl_filters_toggle",function(t){e("#mainImageEditArea").toggle()}),e(document).on("click",".lcl_filters_image_quantize_toggle",function(t){e("#palette").empty(),e("#palette").html('<span style=""><img id="loader2" alt="loading" width="36" height="36" src="/app/explore2/assets/images/loading.gif"/></span>'),e("#imageColorQuantization").toggle(),qt()}),e(document).on("click",".lcl_thumbs_toggle",function(t){if(m!=d)return!0;var n=e(".lcl_fullscreen_mode").length;e("#lcl_wrap").addClass("lcl_toggling_tn").toggleClass("lcl_tn_hidden"),n||setTimeout(function(){we()},160),setTimeout(function(){e("#lcl_wrap").removeClass("lcl_toggling_tn")},g.animation_time+50)});var yt=u?" click":"";e(document).on("lcl_tn_elem_click"+yt,".lcl_tn_inner > li",function(t){if(m!=d)return!0;var n=e(this).attr("rel");A(n)}),e(document).on("click",".lcl_tn_prev:not(.lcl_tn_disabled_arr)",function(t){if(m!=d)return!0;e(".lcl_tn_inner").stop(!0).animate({scrollLeft:e(".lcl_tn_inner").scrollLeft()-g.thumbs_w-10},300,"linear",function(){e(".lcl_tn_inner").trigger("lcl_smoothscroll_end")})}),e(document).on("click",".lcl_tn_next:not(.lcl_tn_disabled_arr)",function(t){if(m!=d)return!0;e(".lcl_tn_inner").stop(!0).animate({scrollLeft:e(".lcl_tn_inner").scrollLeft()+g.thumbs_w+10},300,"linear",function(){e(".lcl_tn_inner").trigger("lcl_smoothscroll_end")})}),e(document).on("wheel","#lcl_thumbs_nav.lcl_tn_has_arr",function(t){if(m!=d)return!0;t.preventDefault();var n=t.originalEvent.deltaY;n>0?e(".lcl_tn_prev:not(.lcl_tn_disabled_arr)").trigger("click"):e(".lcl_tn_next:not(.lcl_tn_disabled_arr)").trigger("click")}),e(document).on("contextmenu","#lcl_wrap *",function(){if(m!=d)return!0;if(v.rclick_prevent)return!1}),e(window).on("touchmove",function(t){if(e(t.target),!i||!u||m!=d)return!0;!e(t.target).parents("#lcl_window").length&&!e(t.target).parents("#lcl_thumbs_nav").length&&t.preventDefault()});var bt=function(){if(typeof AlloyFinger!="function")return!1;lcl_is_pinching=!1;var t=document.querySelector("#lcl_wrap");new AlloyFinger(t,{singleTap:function(n){e(n.target).attr("id")=="lcl_overlay"&&!v.modal&&xt()},doubleTap:function(n){n.preventDefault(),zoom(!0)},pinch:function(n){n.preventDefault(),lcl_is_pinching=!0,typeof lcl_swipe_delay<"u"&&clearTimeout(lcl_swipe_delay),typeof lcl_pinch_delay<"u"&&clearTimeout(lcl_pinch_delay),lcl_pinch_delay=setTimeout(function(){n.scale>1.2?zoom(!0):n.scale<.8&&zoom(!1),setTimeout(function(){lcl_is_pinching=!1},300)},20)},touchStart:function(n){lcl_touchstartX=n.changedTouches[0].clientX},touchEnd:function(n){var c=lcl_touchstartX-n.changedTouches[0].clientX;if((c<-50||c>50)&&!lcl_is_pinching){if(e(n.target).parents("#lcl_thumbs_nav").length||e(n.target).parents(".lcl_zoom_wrap").length)return!1;var o=e(n.target).parents(".lcl_zoomable").length?250:0;typeof lcl_swipe_delay<"u"&&clearTimeout(lcl_swipe_delay),lcl_swipe_delay=setTimeout(function(){c<-50?A("prev"):A("next")},o)}}})},oe=function(){return d?(s=e.data(d,"lcl_vars"),v=e.data(d,"lcl_settings"),s?!0:(console.error("LC Lightbox. Object not initialized"),!1)):!1},we=function(){if(!i||r||!oe())return!1;var t=s;typeof n<"u"&&clearTimeout(n);var n=setTimeout(function(){e("#lcl_wrap").addClass("lcl_is_resizing"),ve();var c=t.elems[t.elem_index];return P(c)},20)},xt=function(){return!i||r||!oe()?!1:he()},Ve=function(t){if(!i||typeof t>"u"&&typeof _<"u"||!oe())return!1;var n=v;if(!n.carousel&&s.elem_index==s.elems.length-1)return!1;typeof _<"u"&&clearInterval(_),e("#lcl_wrap").addClass("lcl_is_playing");var c=n.animation_time+n.slideshow_time;if(Pe(!0),_=setInterval(function(){Pe(!1),A("next",!0)},c),typeof t>"u"&&(typeof n.slideshow_start=="function"&&n.slideshow_start.call(null,n,s),!s.is_arr_instance)){var o=s.elems_selector?e(s.elems_selector):d;o.first().trigger("lcl_slideshow_start",[c])}return!0},re=function(){if(!i||typeof _>"u"||!oe())return!1;var t=v;if(!t)return console.error("LC Lightbox. Object not initialized"),!1;if(clearInterval(_),_=void 0,e("#lcl_wrap").removeClass("lcl_is_playing"),e("#lcl_progressbar").stop(!0).animate({marginTop:e("#lcl_progressbar").height()*-3},300,function(){e(this).remove()}),typeof t.slideshow_end=="function"&&t.slideshow_end.call(null,v,s),!s.is_arr_instance){var n=s.elems_selector?e(s.elems_selector):d;n.first().trigger("lcl_slideshow_end",[])}return!0};return m}})(jQuery);var ue=[],xe=[],ke=[];function rt(){ue=[],xe=[],ke=[];for(var e=document.getElementById("imageEditing").getElementsByTagName("input"),l=0;l<e.length;l++)e[l].setAttribute("id",l),xe.push(e[l].getAttribute("class")),ke.push(e[l].getAttribute("unit")),e[l].value==""&&(e[l].value=0),ue.push(e[l].value),e[l].oninput=function(){this.value==""&&(this.value=0),ue[this.getAttribute("id")]=this.value,ct()}}function ct(){var e="";ue.forEach(function(r,_){e+=xe[_]+"("+r+ke[_]+") "});var l=document.querySelector("#lcl_subj");l.style.filter=e;var i=document.querySelector("#openseadragon");i.style.filter=e}window.resetFilters=function(){$("#imageEditing").html('<div class="filter-input"><p>brightness</p><input min="0" max="300" value="100" class="brightness" unit="%" type="range"></div><div class="filter-input"><p>contrast</p><input min="0" max="300" value="100" class="contrast"  unit="%" type="range"></div><div class="filter-input"><p>saturate</p><input min="0" max="300" value="100" class="contrast"  unit="%" type="range"></div><div class="filter-input"><p>color rotation</p><input value="0" min="0" max="360" class="hue-rotate" unit="deg" type="range"></div><div class="filter-input"><p>grayscale</p><input value="0" min="0" class="grayscale" unit="%" type="range"></div><div class="filter-input"><p>invert</p><input value="0" min="0" class="invert" unit="%" type="range"></div><div class="filter-input"><p>sepia</p><input value="0" min="0" class="sepia" unit="%" type="range"></div><div class="filter-input"><p>blur</p><input value="0" min="0" max="10" class="blur" unit="px" type="range"></div><div class="filter-input"><p>opacity</p><input min="0" value="100" class="opacity" unit="%" type="range"></div>'),rt(),ct()};const zt=e=>{const l=document.getElementById("palette"),i=document.getElementById("complementary");l.innerHTML="",i.innerHTML="";const r=It(e),_=Lt(r);for(let u=0;u<r.length;u++){const d=Tt(r[u]),g=Et(_[u]);if(u>0&&Mt(r[u],r[u-1])<120)continue;const h=document.createElement("div");if(h.style.backgroundColor=d,h.appendChild(document.createTextNode(d)),l.appendChild(h),_[u].h){const b=document.createElement("div");b.style.backgroundColor=`hsl(${_[u].h},${_[u].s}%,${_[u].l}%)`,b.appendChild(document.createTextNode(g)),i.appendChild(b)}}},Tt=e=>{const l=i=>{const r=i.toString(16);return r.length==1?"0"+r:r};return("#"+l(e.r)+l(e.g)+l(e.b)).toUpperCase()},Et=e=>{const l={...e};l.l/=100;const i=l.s*Math.min(l.l,1-l.l)/100,r=_=>{const u=(_+l.h/30)%12,d=l.l-i*Math.max(Math.min(u-3,9-u,1),-1);return Math.round(255*d).toString(16).padStart(2,"0")};return`#${r(0)}${r(8)}${r(4)}`.toUpperCase()},Lt=e=>e.map(l=>{let i,r,_=0,u=l.r/255,d=l.g/255,g=l.b/255;const h=Math.max(u,d,g),b=Math.min(u,d,g),z=h-b;_=(h+b)/2,_<=.5?r=z/(h+b):_>=.5&&(r=z/(2-h-b));const m=Math.max(l.r,l.g,l.b);return m===l.r?i=(d-g)/z:m===l.g?i=2+(g-u)/z:i=4+(d-g)/z,i=i*60,i<0&&(i=i+360),z===0?!1:{h:Math.round(i)+180,s:parseFloat(r*100).toFixed(2),l:parseFloat(_*100).toFixed(2)}}),It=e=>{const l=i=>.2126*i.r+.7152*i.g+.0722*i.b;return e.sort((i,r)=>l(r)-l(i))},jt=e=>{const l=[];for(let i=0;i<e.length;i+=4){const r={r:e[i],g:e[i+1],b:e[i+2]};l.push(r)}return l},Mt=(e,l)=>{const i=Math.pow(l.r-e.r,2),r=Math.pow(l.g-e.g,2),_=Math.pow(l.b-e.b,2);return i+r+_},Nt=e=>{let l=Number.MAX_VALUE,i=Number.MAX_VALUE,r=Number.MAX_VALUE,_=Number.MIN_VALUE,u=Number.MIN_VALUE,d=Number.MIN_VALUE;e.forEach(m=>{l=Math.min(l,m.r),i=Math.min(i,m.g),r=Math.min(r,m.b),_=Math.max(_,m.r),u=Math.max(u,m.g),d=Math.max(d,m.b)});const g=_-l,h=u-i,b=d-r,z=Math.max(g,h,b);return z===g?"r":z===h?"g":"b"},Ce=(e,l)=>{if(l===4||e.length===0){const _=e.reduce((u,d)=>(u.r+=d.r,u.g+=d.g,u.b+=d.b,u),{r:0,g:0,b:0});return _.r=Math.round(_.r/e.length),_.g=Math.round(_.g/e.length),_.b=Math.round(_.b/e.length),[_]}const i=Nt(e);e.sort((_,u)=>_[i]-u[i]);const r=e.length/2;return[...Ce(e.slice(0,r),l+1),...Ce(e.slice(r+1),l+1)]},At=e=>new Promise((l,i)=>{let r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="blob",r.onload=()=>{l(r.response)},r.onerror=i,r.send()});async function qt(){const e=new Image,l=ot,i=new FileReader;i.onload=()=>{e.onload=()=>{const r=document.getElementById("quantize-canvas");r.width=e.width,r.height=e.height;const _=r.getContext("2d");_.drawImage(e,0,0);const u=_.getImageData(0,0,r.width,r.height),d=jt(u.data),g=Ce(d,0);zt(g)},e.src=i.result};try{let r=await At(l);return i.readAsDataURL(r),r}catch(r){return $("#status").text("error: ",r),null}}window.detect=async function(e){const l=await window.detector(e,{threshold:.5,percentage:!0});l.forEach(St),$("#status").text(l.length+" objects detected")};function St({box:e,label:l}){const{xmax:i,xmin:r,ymax:_,ymin:u}=e,d="#"+Math.floor(Math.random()*16777215).toString(16).padStart(6,0),g=document.createElement("div");g.className="bounding-box",Object.assign(g.style,{borderColor:d,left:100*r+"%",top:100*u+"%",width:100*(i-r)+"%",height:100*(_-u)+"%"});const h=document.createElement("span");h.textContent=l,h.className="bounding-box-label",h.style.backgroundColor=d,g.appendChild(h),document.getElementById("lcl_elem_wrap").appendChild(g)}function F(){}function at(e){return e()}function Ge(){return Object.create(null)}function ie(e){e.forEach(at)}function $t(e){return typeof e=="function"}function Ie(e,l){return e!=e?l==l:e!==l||e&&typeof e=="object"||typeof e=="function"}let se;function ze(e,l){return se||(se=document.createElement("a")),se.href=l,e===se.href}function Ft(e){return Object.keys(e).length===0}function U(e,l){e.appendChild(l)}function S(e,l,i){e.insertBefore(l,i||null)}function q(e){e.parentNode.removeChild(e)}function Dt(e,l){for(let i=0;i<e.length;i+=1)e[i]&&e[i].d(l)}function R(e){return document.createElement(e)}function J(e){return document.createTextNode(e)}function te(){return J(" ")}function Ht(){return J("")}function Rt(e,l,i,r){return e.addEventListener(l,i,r),()=>e.removeEventListener(l,i,r)}function L(e,l,i){i==null?e.removeAttribute(l):e.getAttribute(l)!==i&&e.setAttribute(l,i)}function Pt(e){return Array.from(e.childNodes)}function Te(e,l){l=""+l,e.wholeText!==l&&(e.data=l)}function _e(e,l,i){e.classList[i?"add":"remove"](l)}function Ot(e,l,{bubbles:i=!1,cancelable:r=!1}={}){const _=document.createEvent("CustomEvent");return _.initCustomEvent(e,i,r,l),_}let ne;function le(e){ne=e}function Bt(){if(!ne)throw new Error("Function called outside component initialization");return ne}function Ut(){const e=Bt();return(l,i,{cancelable:r=!1}={})=>{const _=e.$$.callbacks[l];if(_){const u=Ot(l,i,{cancelable:r});return _.slice().forEach(d=>{d.call(e,u)}),!u.defaultPrevented}return!0}}const ee=[],Ke=[],me=[],Ze=[],Qt=Promise.resolve();let Ee=!1;function Xt(){Ee||(Ee=!0,Qt.then(st))}function Le(e){me.push(e)}const be=new Set;let de=0;function st(){const e=ne;do{for(;de<ee.length;){const l=ee[de];de++,le(l),Wt(l.$$)}for(le(null),ee.length=0,de=0;Ke.length;)Ke.pop()();for(let l=0;l<me.length;l+=1){const i=me[l];be.has(i)||(be.add(i),i())}me.length=0}while(ee.length);for(;Ze.length;)Ze.pop()();Ee=!1,be.clear(),le(e)}function Wt(e){if(e.fragment!==null){e.update(),ie(e.before_update);const l=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,l),e.after_update.forEach(Le)}}const pe=new Set;let Q;function et(){Q={r:0,c:[],p:Q}}function tt(){Q.r||ie(Q.c),Q=Q.p}function O(e,l){e&&e.i&&(pe.delete(e),e.i(l))}function Y(e,l,i,r){if(e&&e.o){if(pe.has(e))return;pe.add(e),Q.c.push(()=>{pe.delete(e),r&&(i&&e.d(1),r())}),e.o(l)}else r&&r()}function _t(e){e&&e.c()}function je(e,l,i,r){const{fragment:_,on_mount:u,on_destroy:d,after_update:g}=e.$$;_&&_.m(l,i),r||Le(()=>{const h=u.map(at).filter($t);d?d.push(...h):ie(h),e.$$.on_mount=[]}),g.forEach(Le)}function Me(e,l){const i=e.$$;i.fragment!==null&&(ie(i.on_destroy),i.fragment&&i.fragment.d(l),i.on_destroy=i.fragment=null,i.ctx=[])}function Vt(e,l){e.$$.dirty[0]===-1&&(ee.push(e),Xt(),e.$$.dirty.fill(0)),e.$$.dirty[l/31|0]|=1<<l%31}function Ne(e,l,i,r,_,u,d,g=[-1]){const h=ne;le(e);const b=e.$$={fragment:null,ctx:null,props:u,update:F,not_equal:_,bound:Ge(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(l.context||(h?h.$$.context:[])),callbacks:Ge(),dirty:g,skip_bound:!1,root:l.target||h.$$.root};d&&d(b.root);let z=!1;if(b.ctx=i?i(e,l.props||{},(m,k,...j)=>{const x=j.length?j[0]:k;return b.ctx&&_(b.ctx[m],b.ctx[m]=x)&&(!b.skip_bound&&b.bound[m]&&b.bound[m](x),z&&Vt(e,m)),k}):[],b.update(),z=!0,ie(b.before_update),b.fragment=r?r(b.ctx):!1,l.target){if(l.hydrate){const m=Pt(l.target);b.fragment&&b.fragment.l(m),m.forEach(q)}else b.fragment&&b.fragment.c();l.intro&&O(e.$$.fragment),je(e,l.target,l.anchor,l.customElement),st()}le(h)}class Ae{$destroy(){Me(this,1),this.$destroy=F}$on(l,i){const r=this.$$.callbacks[l]||(this.$$.callbacks[l]=[]);return r.push(i),()=>{const _=r.indexOf(i);_!==-1&&r.splice(_,1)}}$set(l){this.$$set&&!Ft(l)&&(this.$$.skip_bound=!0,this.$$set(l),this.$$.skip_bound=!1)}}function Yt(e){let l,i,r,_;return{c(){l=R("button"),i=J(e[0]),L(l,"class","svelte-1qu0gcj"),_e(l,"right",e[1]==="right"),_e(l,"wrong",e[1]==="wrong")},m(u,d){S(u,l,d),U(l,i),r||(_=Rt(l,"click",e[2]),r=!0)},p(u,[d]){d&1&&Te(i,u[0]),d&2&&_e(l,"right",u[1]==="right"),d&2&&_e(l,"wrong",u[1]==="wrong")},i:F,o:F,d(u){u&&q(l),r=!1,_()}}}function Jt(e,l,i){let{artistName:r,correct:_,index:u}=l;const d=Ut();function g(){d("message",{index:u})}return e.$$set=h=>{"artistName"in h&&i(0,r=h.artistName),"correct"in h&&i(1,_=h.correct),"index"in h&&i(3,u=h.index)},[r,_,g,u]}class Gt extends Ae{constructor(l){super(),Ne(this,l,Jt,Yt,Ie,{artistName:0,correct:1,index:3})}}function Kt(e){let l,i;return{c(){l=R("img"),L(l,"class","loading svelte-7mzcxr"),L(l,"style",""),ze(l.src,i="")||L(l,"src",i),L(l,"alt","loading")},m(r,_){S(r,l,_)},p:F,i:F,o:F,d(r){r&&q(l)}}}class Zt extends Ae{constructor(l){super(),Ne(this,l,null,Kt,Ie,{})}}class el{constructor(l){this.endpoint=l}query(l){const i=this.endpoint+"?query="+encodeURIComponent(l)+"&ts="+Date.now();return fetch(i,{headers:{Accept:"application/sparql-results+json"}}).then(_=>_.json())}}const tl=window.getParameterByName("l")||"en",ll=window.getParameterByName("p1"),nl="https://query.wikidata.org/sparql",il=`SELECT ?painter ?painterLabel ?painting ?paintingLabel ?image WITH {
  SELECT ?painter ?painting ?image WHERE {
    ?painting wdt:P18 ?image .
    ?painting wdt:P31 wd:Q3305213 . # instance of (P31) painting (Q3305213)
    ?painting wdt:P170 ?painter .   # created by (P170)
    ?painter wdt:P106 wd:Q1028181 . # give me all people with occupation (P106) painter (Q1028181)
    ?painter wdt:P135 wd:${ll} .   # who belonged to the this requested movement (P135)
    BIND(MD5(CONCAT(str(?painting),str(RAND()))) as ?random)
  }
  ORDER BY ?random
  LIMIT 5
} AS %results WHERE {
  INCLUDE %results.
  SERVICE wikibase:label { bd:serviceParam wikibase:language "${tl},en,fr,es,de,pt,nl". }
}`,ol=new el(nl);function lt(e,l,i){const r=e.slice();return r[8]=l[i],r[10]=i,r}function rl(e){let l,i,r;return{c(){l=R("a"),i=R("img"),L(i,"class","thumbimage enlargable svelte-1rwuuk1"),ze(i.src,r=e[1])||L(i,"src",r),L(i,"decoding","async"),L(i,"loading","lazy"),L(i,"alt","A random image"),L(l,"class","elem"),L(l,"href",e[1]),L(l,"tabindex","0"),L(l,"data-lcl-txt","...")},m(_,u){S(_,l,u),U(l,i)},p(_,u){u&2&&!ze(i.src,r=_[1])&&L(i,"src",r),u&2&&L(l,"href",_[1])},i:F,o:F,d(_){_&&q(l)}}}function cl(e){let l,i;return l=new Zt({}),{c(){_t(l.$$.fragment)},m(r,_){je(l,r,_),i=!0},p:F,i(r){i||(O(l.$$.fragment,r),i=!0)},o(r){Y(l.$$.fragment,r),i=!1},d(r){Me(l,r)}}}function nt(e){let l,i,r=e[2].painterLabel.value+"",_,u,d=e[2].paintingLabel.value+"",g,h,b,z;return{c(){l=R("p"),i=R("a"),_=J(r),u=J(" - "),g=J(d),b=te(),z=R("p"),z.innerHTML='<button onclick="window.location.reload();"><strong><span class="reload svelte-1rwuuk1">\u27A1</span></strong></button>',L(i,"href","javascript:void(0)"),L(i,"role","button"),L(i,"onclick",h='openInFrame( "/app/wikipedia/?t=&l='+window.getParameterByName("l")+"&qid="+e[2].painting.value.split("/").pop()+'" )')},m(m,k){S(m,l,k),U(l,i),U(i,_),U(i,u),U(i,g),S(m,b,k),S(m,z,k)},p(m,k){k&4&&r!==(r=m[2].painterLabel.value+"")&&Te(_,r),k&4&&d!==(d=m[2].paintingLabel.value+"")&&Te(g,d),k&4&&h!==(h='openInFrame( "/app/wikipedia/?t=&l='+window.getParameterByName("l")+"&qid="+m[2].painting.value.split("/").pop()+'" )')&&L(i,"onclick",h)},d(m){m&&q(l),m&&q(b),m&&q(z)}}}function it(e){let l,i,r,_;return i=new Gt({props:{index:e[10],artistName:e[8].painterLabel.value,correct:e[8].correct}}),i.$on("message",e[5]),{c(){l=R("p"),_t(i.$$.fragment),r=te()},m(u,d){S(u,l,d),je(i,l,null),U(l,r),_=!0},p(u,d){const g={};d&1&&(g.artistName=u[8].painterLabel.value),d&1&&(g.correct=u[8].correct),i.$set(g)},i(u){_||(O(i.$$.fragment,u),_=!0)},o(u){Y(i.$$.fragment,u),_=!1},d(u){u&&q(l),Me(i)}}}function al(e){let l,i,r,_,u,d,g,h;const b=[cl,rl],z=[];function m(s,T){return s[4]?0:1}r=m(e),_=z[r]=b[r](e);let k=e[3]&&nt(e),j=e[0],x=[];for(let s=0;s<j.length;s+=1)x[s]=it(lt(e,j,s));const v=s=>Y(x[s],1,1,()=>{x[s]=null});return{c(){l=R("span"),l.textContent=`${window.getParameterByName("t")}`,i=te(),_.c(),u=te(),k&&k.c(),d=te();for(let s=0;s<x.length;s+=1)x[s].c();g=Ht(),L(l,"id","title"),L(l,"class","svelte-1rwuuk1")},m(s,T){S(s,l,T),S(s,i,T),z[r].m(s,T),S(s,u,T),k&&k.m(s,T),S(s,d,T);for(let D=0;D<x.length;D+=1)x[D].m(s,T);S(s,g,T),h=!0},p(s,[T]){let D=r;if(r=m(s),r===D?z[r].p(s,T):(et(),Y(z[D],1,1,()=>{z[D]=null}),tt(),_=z[r],_?_.p(s,T):(_=z[r]=b[r](s),_.c()),O(_,1),_.m(u.parentNode,u)),s[3]?k?k.p(s,T):(k=nt(s),k.c(),k.m(d.parentNode,d)):k&&(k.d(1),k=null),T&33){j=s[0];let I;for(I=0;I<j.length;I+=1){const X=lt(s,j,I);x[I]?(x[I].p(X,T),O(x[I],1)):(x[I]=it(X),x[I].c(),O(x[I],1),x[I].m(g.parentNode,g))}for(et(),I=j.length;I<x.length;I+=1)v(I);tt()}},i(s){if(!h){O(_);for(let T=0;T<j.length;T+=1)O(x[T]);h=!0}},o(s){Y(_),x=x.filter(Boolean);for(let T=0;T<x.length;T+=1)Y(x[T]);h=!1},d(s){s&&q(l),s&&q(i),z[r].d(s),s&&q(u),k&&k.d(s),s&&q(d),Dt(x,s),s&&q(g)}}}function sl(e,l){return e=Math.ceil(e),l=Math.floor(l),Math.floor(Math.random()*(l-e)+e)}function _l(e,l,i){let r=[],_,u,d,g,h=!0;ol.query(il).then(m=>{i(4,h=!1),i(0,r=m.results.bindings),u=sl(0,5),i(2,d=r[u]),i(1,_=d.image.value),window.setupImageClicks(),window.setupImageZoom()});function b(){i(3,g=!0),r.forEach(m=>{m.correct!=="right"&&(m.correct="wrong")})}function z(m){const k=m.detail.index;k===u?(i(0,r[k].correct="right",r),b()):i(0,r[k].correct="wrong",r);const j=r[k].painterLabel.value,x=r[k].painter.value.split("/").pop();window.gotoPage(x,j)}return[r,_,d,g,h,z]}class dl extends Ae{constructor(l){super(),Ne(this,l,_l,al,Ie,{})}}new dl({target:document.getElementById("app")});
