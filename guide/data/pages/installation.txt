====== installation ======

This page describes how to install, maintain and develop Conzept on your own system(s).

===== step 1: Get the Conzept source =====

<code>sudo apt install -y git unzip</code>

<code>git clone --depth 1 --branch 2023.07 https://github.com/waldenn/conzept.git</code>

<code>cd conzept</code>

<code>cp settings.conf.example settings.conf</code>

===== step 2: Configure Conzept =====

Now edit the Conzept settings file for your system. The available settings are described [[configuration|here]].

You must set the "**CONZEPT_HOSTNAME**" and "**CONZEPT_EMAIL**" (required for the HTTPS certificate).

<code>vi settings.conf</code>

===== step 3: Install docker =====

[{{ ::docker_logo.png?direct|Docker logo}}]

<code>./docker_install.sh</code>

[ NOTE: **__You now need to logout and then login again after running this script__**, to make sure the group permission are active. ]

===== step 4: Build the docker image =====

Go to the Conzept directory:
<code>cd conzept</code>

Build the Conzept docker image:
<code>docker-compose build</code>

Run the docker image (with a correct HTTPs certificate)
<code>sudo ./init-https.sh</code>

Alternatively, you can build //and// run the Conzept docker-image in one step:
<code>docker-compose up -d</code>

===== docker-based development =====

==== local development ====

[ TODO ]

  * map app:/var/www/html/app
  * docker build
  * docker up
  * change staging to "1" "init-https.sh"

==== updating production ====

[ TODO ]

  * First commit the changes to Git
    * If needed: Set "staging" to “0” in “init-https.sh”

  * On the production server:
<code>git pull</code>

  * TODO: Handle existing settings
<code>...</code>

  * Rebuild the Docker image:
<code>docker-compose up -d</code>

===== common docker commands =====

  * Build an image:
    * docker-compose build

  * Fetch an image:
    * docker pull [image-name:image-version]

  * List installed images:
    * docker images

  * Create a new container (from an image)
    * docker run -d --name conzept

  * Start/stop a container:
    * docker stop conzept
    * docker start conzept

  * List running containers:
    * docker ps

  * Run a command within a container (note: no data persistence between start/stops):
    * docker exec -it conzept /bin/bash